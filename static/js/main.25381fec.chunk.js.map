{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","images/element-trash.png","components/Main.js","components/Footer.js","images/close-icon.svg","components/ImagePopup.js","components/PopupWithForm.js","components/EditPropfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Register.jsx","components/Login.jsx","images/tick-icon.svg","images/cross-icon.svg","components/InfoTooltip.js","components/ProtectedRoute.js","utils/Api.js","utils/Auth.js","components/App.jsx","index.js"],"names":["Header","isLoggedIn","title","link","userData","onLogOut","className","to","onClick","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isLiked","card","likes","some","i","_id","cardLikeButtonClassName","owner","src","alt","onCardDelete","name","onCardClick","type","onCardLike","length","Main","onEditAvatar","style","backgroundImage","avatar","onEditProfile","about","onAddPlace","cards","map","userId","isLoading","Footer","ImagePopup","closeIcon","onClose","PopupWithForm","isOpen","onSubmit","children","EditProfilePopup","useState","setName","description","setDescription","useEffect","isClose","e","preventDefault","onUpdateUser","id","placeholder","minLength","maxLength","required","onChange","target","value","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","placeLinkRef","placeNameRef","Register","email","password","formValues","setFormValues","handleInputChange","onFormSubmit","Login","InfoToolTip","isSignedUp","message","tickIcon","crossIcon","ProtectedRoute","Component","component","api","options","this","_url","baseUrl","headers","path","fetch","then","checkStatus","userDataPath","cardsDataPath","Promise","all","getUserInfo","_getInitialCards","method","body","JSON","stringify","res","ok","json","reject","status","authorization","BASE_URL","checkResponse","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isSpinnerLoading","setIsSpinnerLoading","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoggedIn","isAuthPopupOpen","setIsAuthPopupOpen","userInfo","setUserInfo","setIsSignedUp","setMessage","userEmail","history","useHistory","tokenCheck","token","jwt","localStorage","getItem","data","push","catch","err","console","error","handleCardClick","closeAllPopups","getAppInfo","cardsArray","log","finally","Provider","exact","removeItem","auth","setItem","delete","newCards","filter","c","newCard","put","updateInfo","addCard","updateAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wOAeeA,MAZf,YAAgE,IAA/CC,EAA8C,EAA9CA,WAAYC,EAAkC,EAAlCA,MAAOC,EAA2B,EAA3BA,KAAMC,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,SAChD,OACA,qCACI,qBAAKC,UAAU,SACf,sBAAKA,UAAU,6BAAf,UACKL,GAAc,oBAAIK,UAAU,qBAAd,SAAoCF,IACnD,cAAC,IAAD,CAAMG,GAAIJ,EAAMG,UAAWL,EAAU,uEAA6EO,QAASH,EAA3H,SAAsIH,WCPrIO,EAAqBC,IAAMC,gBCsCzBC,MApCf,SAAcC,GACV,IAAMC,EAAcJ,IAAMK,WAAWN,GAW/BO,EAAUH,EAAMI,KAAKC,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEC,MAAQP,EAAYO,OAG3DC,EAAuB,yBAAsBN,GAAW,yBAM9D,OACI,qCACKH,EAAMI,KAAKM,MAAMF,MAAQP,EAAYO,KAAO,qBAAKG,IC3B/C,iaD2BiEC,IAAI,mIAA0BnB,UAAU,mBAAmBE,QAhBvI,WACIK,EAAMa,aAAab,EAAMI,KAAKI,QAgB1B,qBAAKG,IAAKX,EAAMI,KAAKd,KAAMsB,IAAKZ,EAAMI,KAAKU,KAAMrB,UAAU,kBAAkBE,QArBrF,WACIK,EAAMe,YAAYf,EAAMI,SAqBpB,sBAAKX,UAAU,mBAAf,UACI,oBAAIA,UAAU,iBAAd,SAAgCO,EAAMI,KAAKU,OAC3C,sBAAKrB,UAAU,2BAAf,UACI,wBAAQA,UAAWgB,EAAyBO,KAAK,SAASrB,QAX1E,WACIK,EAAMiB,WAAWjB,EAAMI,SAWX,qBAAKX,UAAU,yBAAf,SAAyCO,EAAMI,KAAKC,MAAMa,mBEI/DC,MAjCf,SAAcnB,GAEV,IAAMC,EAAcJ,IAAMK,WAAWN,GAErC,OACI,uBAAMH,UAAU,UAAhB,UACA,0BAASA,UAAU,UAAnB,UACI,sBAAKA,UAAU,gBAAf,UACI,wBAAQA,UAAU,kBAAkBE,QAASK,EAAMoB,aAAcJ,KAAK,SAASK,MAAO,CAAEC,gBAAgB,OAAD,OAASrB,EAAYsB,OAArB,QACvG,sBAAK9B,UAAU,gBAAf,UACI,sBAAKA,UAAU,gBAAf,UACI,oBAAIA,UAAU,gBAAd,SAA+BQ,EAAYa,OAC3C,wBAAQrB,UAAU,6BAA6BuB,KAAK,SAASrB,QAASK,EAAMwB,mBAEhF,mBAAG/B,UAAU,sBAAb,SAAoCQ,EAAYwB,cAGxD,wBAAQhC,UAAU,4BAA4BE,QAASK,EAAM0B,WAA7D,kBAEJ,yBAASjC,UAAU,WAAnB,SACI,oBAAIA,UAAU,iBAAd,SACKO,EAAM2B,MAAMC,KAAI,SAACxB,GAAD,OACb,oBAAIX,UAAU,iBAAd,SACI,cAAC,EAAD,CAAMW,KAAMA,EAAMW,YAAaf,EAAMe,YAAac,OAAQ5B,EAAYO,IAAKK,aAAcb,EAAMa,aAAcI,WAAYjB,EAAMiB,cAD/Fb,EAAKI,YAMpDR,EAAM8B,WAAa,qBAAKrC,UAAU,UAAf,SAAyB,4BCtBtCsC,MARf,WACI,OACI,wBAAQtC,UAAU,SAAlB,SACI,mBAAGA,UAAU,oBAAb,uHCLG,MAA0B,uCCgB1BuC,MAbf,SAAoBhC,GAChB,OACI,sBAAKP,UAAWO,EAAMI,KAAKd,KAAX,mEAAhB,UACA,qBAAKG,UAAU,wCACf,sBAAKA,UAAU,iBAAf,UACI,qBAAKkB,IAAKX,EAAMI,KAAKd,KAAMsB,IAAKZ,EAAMI,KAAKU,KAAMrB,UAAU,yBAC3D,mBAAGA,UAAU,sBAAb,SAAoCO,EAAMI,KAAKU,OAC/C,qBAAKH,IAAKsB,EAAWrB,IAAI,0GAAqBnB,UAAU,qBAAqBE,QAASK,EAAMkC,iBCSzFC,MAhBf,SAAuBnC,GACnB,OACI,sBAAKP,UAAWO,EAAMoC,OAAN,2BAAmCpC,EAAMc,KAAzC,4CAAmFd,EAAMc,MAAzG,UACI,qBAAKrB,UAAU,mBACf,uBAAMA,UAAS,iDAA4CO,EAAMc,MAAQuB,SAAUrC,EAAMqC,SAAzF,UACI,qBAAK1B,IAAKsB,EAAWrB,IAAI,0GAAqBnB,UAAU,qBAAqBE,QAASK,EAAMkC,UAC5F,oBAAIzC,UAAU,eAAd,SAA8BO,EAAMX,QACnCW,EAAMsC,SACP,wBAAQtB,KAAK,SAASvB,UAAU,aAAhC,2ECqCD8C,MA5Cf,SAA0BvC,GACtB,IAAMC,EAAcJ,IAAMK,WAAWN,GADR,EAGLC,IAAM2C,SAAS,IAHV,mBAGtB1B,EAHsB,KAGhB2B,EAHgB,OAIS5C,IAAM2C,SAAS,IAJxB,mBAItBE,EAJsB,KAITC,EAJS,KA+B7B,OAzBA9C,IAAM+C,WAAU,WACZH,EAAQxC,EAAYa,MACpB6B,EAAe1C,EAAYwB,SAC1B,CAACxB,IAuBF,eAAC,EAAD,CAAea,KAAM,UAAWzB,MAAO,4HAAyB+C,OAAQpC,EAAMoC,OAAQF,QAASlC,EAAMkC,QAASW,QAAS7C,EAAMoC,OAAQC,SAZzI,SAAsBS,GAElBA,EAAEC,iBAGF/C,EAAMgD,aAAa,CACjBlC,OACAW,MAAOiB,KAKT,UACI,uBAAOO,GAAG,qBAAqBjC,KAAK,OAAOvB,UAAU,sCAAsCqB,KAAK,OAChGoC,YAAY,8FAAmBC,UAAU,IAAIC,UAAU,KAAKC,UAAQ,EAACC,SAtB7E,SAA0BR,GACtBL,EAAQK,EAAES,OAAOC,QAqBoFA,MAAO1C,GAAQ,KAChH,sBAAMmC,GAAG,6BACT,uBAAOA,GAAG,2BAA2BjC,KAAK,OAAOvB,UAAU,4CAA4CqB,KAAK,OAC5GoC,YAAY,2TAA4DC,UAAU,IAAIC,UAAU,MAAMC,UAAQ,EAACG,MAAOd,GAAe,GACrIY,SAtBR,SAAiCR,GAC7BH,EAAeG,EAAES,OAAOC,UAsBpB,sBAAMP,GAAG,uCCpBNQ,MApBf,SAAyBzD,GACrB,IAAM0D,EAAY7D,IAAM8D,SAUxB,OACI,eAAC,EAAD,CAAe7C,KAAM,SAAUzB,MAAO,wFAAmB+C,OAAQpC,EAAMoC,OAAQF,QAASlC,EAAMkC,QAASW,QAAS7C,EAAMoC,OAAQC,SATlI,SAAsBS,GAClBA,EAAEC,iBAEF/C,EAAM4D,eAAe,CACnBrC,OAAQmC,EAAUG,QAAQL,SAK5B,UACI,uBAAOP,GAAG,oBAAoBjC,KAAK,MAAMvB,UAAU,4CAA4CqB,KAAK,OACpGoC,YAAY,qGAAqBG,UAAQ,EAACS,IAAKJ,IAC/C,sBAAMT,GAAG,gCCSNc,MAxBf,SAAuB/D,GACnB,IAAMgE,EAAenE,IAAM8D,SACrBM,EAAepE,IAAM8D,SAW3B,OACI,eAAC,EAAD,CAAe7C,KAAM,WAAYzB,MAAO,gEAAe+C,OAAQpC,EAAMoC,OAAQF,QAASlC,EAAMkC,QAASW,QAAS7C,EAAM6C,QAASR,SAVjI,SAAsBS,GAClBA,EAAEC,iBAEF/C,EAAM0B,WAAW,CACbZ,KAAMmD,EAAaJ,QAAQL,MAC3BlE,KAAM0E,EAAaH,QAAQL,SAK/B,UACI,uBAAOP,GAAG,kBAAkBjC,KAAK,OAAOvB,UAAU,sCAAsCqB,KAAK,OAAOoC,YAAY,mDAAWC,UAAU,IAAIC,UAAU,KAAKC,UAAQ,EAACS,IAAKG,IACtK,sBAAMhB,GAAG,0BACT,uBAAOA,GAAG,wBAAwBjC,KAAK,MAAMvB,UAAU,4CAA4CqB,KAAK,OAAOoC,YAAY,qGAAqBG,UAAQ,EAACS,IAAKE,IAC9J,sBAAMf,GAAG,oC,eCyCNiB,MA3Df,SAAkBlE,GAAQ,IAAD,EACaH,IAAM2C,SAAS,CACjD2B,MAAO,GACPC,SAAU,KAHW,mBAChBC,EADgB,KACJC,EADI,KAMjBC,EAAoB,SAACzB,GAAO,IAAD,EACLA,EAAES,OAAlBzC,EADqB,EACrBA,KAAM0C,EADe,EACfA,MACdc,EAAc,2BACTD,GADQ,kBAEVvD,EAAO0C,MAgBd,OACE,qBAAK/D,UAAU,qCAAf,SACE,uBAAM4C,SAdV,SAAsBS,GACpBA,EAAEC,iBADqB,IAGfoB,EAAoBE,EAApBF,MAAOC,EAAaC,EAAbD,SAGfpE,EAAMwE,aAAa,CACjBL,QACAC,cAMA,UACE,oBAAI3E,UAAU,sCAAd,gFACA,uBACEuB,KAAK,QACLvB,UAAU,sCACVqB,KAAK,QACLoC,YAAY,QACZC,UAAU,IACVC,UAAU,KACVC,UAAQ,EACRC,SAAUiB,IAEZ,uBACEvD,KAAK,WACLvB,UAAU,sCACVqB,KAAK,WACLoC,YAAY,uCACZG,UAAQ,EACRC,SAAUiB,IAEZ,wBAAQvD,KAAK,SAASvB,UAAU,kCAAhC,0HAGA,qBAAKA,UAAU,qBAAf,SACE,cAAC,IAAD,CAAMC,GAAG,UAAUD,UAAU,8BAA7B,yKCGKgF,MAxDf,SAAezE,GAAQ,IAAD,EACgBH,IAAM2C,SAAS,CACjD2B,MAAO,GACPC,SAAU,KAHQ,mBACbC,EADa,KACDC,EADC,KAMdC,EAAoB,SAACzB,GAAO,IAAD,EACLA,EAAES,OAAlBzC,EADqB,EACrBA,KAAM0C,EADe,EACfA,MACdc,EAAc,2BACTD,GADQ,kBAEVvD,EAAO0C,MAgBd,OACE,qBAAK/D,UAAU,qCAAf,SACE,uBAAMA,UAAU,kBAAkB4C,SAdtC,SAAsBS,GACpBA,EAAEC,iBADqB,IAGfoB,EAAoBE,EAApBF,MAAOC,EAAaC,EAAbD,SAGfpE,EAAMwE,aAAa,CACjBL,QACAC,cAMA,UACE,oBAAI3E,UAAU,sCAAd,sCACA,uBACEuB,KAAK,QACLvB,UAAU,sCACVqB,KAAK,QACLoC,YAAY,QACZC,UAAU,IACVC,UAAU,KACVC,UAAQ,EACRC,SAAUiB,IAEZ,uBACEvD,KAAK,WACLvB,UAAU,sCACVqB,KAAK,WACLoC,YAAY,uCACZG,UAAQ,EACRC,SAAUiB,IAEZ,wBAAQvD,KAAK,SAASvB,UAAU,kCAAhC,kDClDO,MAA0B,sCCA1B,MAA0B,uCCoB1BiF,MAff,YAA8D,IAAxCtC,EAAuC,EAAvCA,OAAQF,EAA+B,EAA/BA,QAASyC,EAAsB,EAAtBA,WAAYC,EAAU,EAAVA,QAEjD,OACE,sBAAKnF,UAAW2C,EAAM,6BAAtB,UACA,qBAAK3C,UAAU,mBACf,sBAAKA,UAAU,mCAAf,UACA,qBAAKkB,IAAKsB,EAAWrB,IAAI,0GAAqBnB,UAAU,qBAAqBE,QAASuC,IACpF,qBAAKvB,IAAKgE,EAAaE,EAAWC,EAAWlE,IAAI,0GAAqBnB,UAAU,qBAChF,oBAAIA,UAAU,8CAAd,SAA6DkF,EAAU,kLAAyCC,EAAzC,oH,QCC9DG,EATQ,SAAC,GAAyC,IAA5BC,EAA2B,EAAtCC,UAAyBjF,EAAa,6BAC9D,OACE,cAAC,IAAD,UAEI,kBAAMA,EAAMZ,WAAa,cAAC4F,EAAD,eAAehF,IAAY,cAAC,IAAD,CAAUN,GAAG,iB,gBCwE5DwF,EAAM,I,WAhFjB,WAAYC,GAAU,oBACpBC,KAAKC,KAAOF,EAAQG,QACpBF,KAAKG,QAAUJ,EAAQI,Q,6DAGRC,GACf,OAAOC,MAAM,GAAD,OAAIL,KAAKC,MAAT,OAAgBG,GAAQ,CAChCD,QAASH,KAAKG,UAEfG,KAAKN,KAAKO,e,kCAGHH,GACV,OAAOC,MAAM,GAAD,OAAIL,KAAKC,MAAT,OAAgBG,GAAQ,CAChCD,QAASH,KAAKG,UAEfG,KAAKN,KAAKO,e,iCAGJC,EAAcC,GACvB,OAAOC,QAAQC,IAAI,CAACX,KAAKY,YAAYJ,GAAeR,KAAKa,iBAAiBJ,O,iCAGjEL,E,GAAsB,IAAf1E,EAAc,EAAdA,KAAMW,EAAQ,EAARA,MACtB,OAAOgE,MAAM,GAAD,OAAIL,KAAKC,MAAT,OAAgBG,GAAQ,CAChCU,OAAQ,QACRX,QAASH,KAAKG,QACdY,KAAMC,KAAKC,UAAU,CACnBvF,KAAMA,EACNW,MAAOA,MAGViE,KAAKN,KAAKO,e,0BAGXH,EAAMvC,GACR,OAAOwC,MAAM,GAAD,OAAIL,KAAKC,MAAT,OAAgBG,EAAhB,YAAwBvC,GAAM,CACtCiD,OAAQ,MACRX,QAASH,KAAKG,UAEfG,KAAKN,KAAKO,e,6BAGRH,EAAMvC,GACX,OAAOwC,MAAM,GAAD,OAAIL,KAAKC,MAAT,OAAgBG,EAAhB,YAAwBvC,GAAM,CACxCiD,OAAQ,SACRX,QAASH,KAAKG,UAEbG,KAAKN,KAAKO,aACVD,MAAK,SAAAY,GAAG,OAAIA,O,mCAGFd,E,GAAmB,IAAXjE,EAAU,EAAVA,OACnB,OAAOkE,MAAM,GAAD,OAAIL,KAAKC,MAAT,OAAgBG,GAAQ,CAClCU,OAAQ,QACRX,QAASH,KAAKG,QACdY,KAAMC,KAAKC,UAAU,CACnB9E,OAAQA,MAGTmE,KAAKN,KAAKO,e,8BAGTH,E,GAAuB,IAAf1E,EAAc,EAAdA,KAAMxB,EAAQ,EAARA,KACpB,OAAOmG,MAAM,GAAD,OAAIL,KAAKC,MAAT,OAAgBG,GAAQ,CAChCU,OAAQ,OACRX,QAASH,KAAKG,QACdY,KAAMC,KAAKC,UAAU,CACnBvF,KAAMA,EACNxB,KAAMA,MAGToG,KAAKN,KAAKO,e,kCAGHW,GACV,OAAOA,EAAIC,GAAKD,EAAIE,OAASV,QAAQW,OAAR,gDAA0BH,EAAII,a,KAI5C,CAAQ,CACzBpB,QAAS,+CACTC,QAAS,CACPoB,cAAe,uCACf,eAAgB,sBCrFPC,EAAW,gCAElBC,EAAgB,SAACP,GAAU,OAAOA,EAAIC,GAAKD,EAAIE,OAASV,QAAQW,OAAOH,EAAII,SC6TlEI,MA7Sf,WAAgB,IAAD,EAC6CjH,IAAM2C,UAC9D,GAFW,mBACNuE,EADM,KACiBC,EADjB,OAI+CnH,IAAM2C,UAChE,GALW,mBAINyE,EAJM,KAIkBC,EAJlB,OAOyCrH,IAAM2C,UAAS,GAPxD,mBAON2E,EAPM,KAOeC,EAPf,OAQmCvH,IAAM2C,UAAS,GARlD,mBAQN6E,EARM,KAQYC,EARZ,OAS2BzH,IAAM2C,SAAS,IAT1C,mBASN+E,EATM,KASQC,EATR,OAUyB3H,IAAM2C,SAAS,IAVxC,mBAUNvC,EAVM,KAUOwH,EAVP,OAWa5H,IAAM2C,SAAS,IAX5B,mBAWNb,EAXM,KAWC+F,EAXD,OAYuB7H,IAAM2C,UAAS,GAZtC,mBAYNpD,EAZM,KAYMuI,EAZN,OAaiC9H,IAAM2C,UAAS,GAbhD,oBAaNoF,GAbM,MAaWC,GAbX,SAcmBhI,IAAM2C,SAAS,CAC7C2B,MAAO,KAfI,qBAcN2D,GAdM,MAcIC,GAdJ,SAiBuBlI,IAAM2C,UAAS,GAjBtC,qBAiBNmC,GAjBM,MAiBMqD,GAjBN,SAkBiBnI,IAAM2C,SAAS,IAlBhC,qBAkBNoC,GAlBM,MAkBGqD,GAlBH,MAoBPC,GAAYJ,GAAS3D,MAErBgE,GAAUC,cAmDhB,SAASC,KACP,IDhEuBC,ECgEjBC,EAAMC,aAAaC,QAAQ,OAC7BF,IDjEmBD,ECmEPC,EDlEX9C,MAAM,GAAD,OAAImB,EAAJ,aAAyB,CACnCV,OAAQ,MACRX,QAAS,CACP,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2B+C,MAG9B5C,KAAKmB,IC2DCnB,MAAK,SAACY,GACDA,EAAIoC,KAAKvE,QACX4D,GAAY,CACV5D,MAAOmC,EAAIoC,KAAKvE,QAElBwD,GAAc,GACdQ,GAAQQ,KAAK,SAGhBC,OAAM,SAACC,GAAD,OAASC,QAAQC,MAAMF,MAuCpC,SAASG,GAAgB5I,GACvBoH,EAAgBpH,GAGlB,SAAS6I,KACPjC,GAAyB,GACzBE,GAA0B,GAC1BE,GAAuB,GACvBS,IAAmB,GAEfN,EAAajI,MACfkI,GAAiBD,EAAajI,MAiFlC,OAlMAO,IAAM+C,WAAU,WACdyF,OACC,IAyEHxI,IAAM+C,WAAU,WACd0E,GAAoB,GACpBpC,EACGgE,WAAW,WAAY,SACvBxD,MAAK,SAACgD,GAAU,IAAD,cACiBA,EADjB,GACPnJ,EADO,KACG4J,EADH,KAEdzB,EAASyB,GACT1B,EAAelI,MAEhBqJ,OAAM,SAACC,GAAD,OAASC,QAAQM,IAAR,gBAAqBP,OACpCQ,SAAQ,WACP/B,GAAoB,QAEvB,IA2GD,cAAC1H,EAAmB0J,SAApB,CAA6B9F,MAAOvD,EAApC,SACE,sBAAKR,UAAU,OAAf,UACE,yBAAQA,UAAU,SAAlB,UACE,cAAC,IAAD,CAAO8J,OAAK,EAAC/D,KAAK,IAAlB,SACE,cAAC,EAAD,CACEpG,WAAYA,EACZC,MAAO,iCACPC,KAAM,UACNC,SAAU2I,GACV1I,SAzIZ,WACEgJ,aAAagB,WAAW,OACxBzB,GAAY,CACV5D,MAAO,KAETwD,GAAc,QAuIR,cAAC,IAAD,CAAOnC,KAAK,WAAZ,SACE,cAAC,EAAD,CAAQpG,WAAYA,EAAYC,MAAO,iCAASC,KAAM,cAExD,cAAC,IAAD,CAAOkG,KAAK,WAAZ,SACE,cAAC,EAAD,CACEpG,WAAYA,EACZC,MAAO,qEACPC,KAAM,iBAIZ,eAAC,IAAD,WACE,cAAC,IAAD,CAAOkG,KAAK,WAAZ,SACE,cAAC,EAAD,CAAUhB,aAxNpB,aD1CsB,SAACJ,EAAUD,GACjC,OAAOsB,MAAM,GAAD,OAAImB,EAAJ,WAAuB,CACjCV,OAAQ,OACRX,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBY,KAAMC,KAAKC,UAAU,CAACjC,WAAUD,YAEjCuB,KAAKmB,ICkCJ4C,CAD2C,EAAnBrF,SAAmB,EAATD,OAG/BuB,MAAK,SAACgD,GACLX,GAAY,CACV5D,MAAOuE,EAAKA,KAAKvE,QAEnB6D,IAAc,GACdH,IAAoBD,IACpBO,GAAQQ,KAAK,eAEdC,OAAM,SAACC,GACNC,QAAQM,IAAIP,GACA,MAARA,GACFZ,GAAW,kMAEXD,IAAc,GACdH,IAAoBD,YAyMpB,cAAC,IAAD,CAAOpC,KAAK,WAAZ,SACE,cAAC,EAAD,CAAOhB,aAtMjB,YAA2C,IAApBJ,EAAmB,EAAnBA,SAAUD,EAAS,EAATA,ODnDV,SAACC,EAAUD,GAClC,OAAOsB,MAAM,GAAD,OAAImB,EAAJ,WAAuB,CACjCV,OAAQ,OACRX,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBY,KAAMC,KAAKC,UAAU,CAACjC,WAAUD,YAEjCuB,KAAKmB,IC2CJ4C,CACarF,EAAUD,GACpBuB,MAAK,SAACgD,GACDA,EAAKJ,OACPE,aAAakB,QAAQ,MAAOhB,EAAKJ,OAEnCX,GAAc,GACdI,GAAY,CACV5D,MAAOA,IAETgE,GAAQQ,KAAK,QAEdC,OAAM,SAACC,GACM,MAARA,EACFZ,GAAW,sIACM,MAARY,GACTZ,GAAW,2IAEbD,IAAc,GACdH,IAAmB,OAkLmBQ,WAAYA,OAEhD,cAAC,EAAD,CACEkB,OAAK,EACL/D,KAAK,IACLpG,WAAYA,EACZgC,aA3IV,WACE4F,GAA0BD,IA2IlBvF,cAxIV,WACE0F,GAA2BD,IAwInBvF,WArIV,WACE0F,GAAwBD,IAqIhBjF,QAAS+G,GACTlI,YAAaiI,GACbrH,MAAOA,EACPd,aAtHV,SAA0BoC,GACxBiC,EACGyE,OAAO,QAAS1G,GAChByC,MAAK,WACJ,IAAMkE,EAAWjI,EAAMkI,QAAO,SAACC,GAC7B,OAAOA,EAAEtJ,MAAQyC,KAEnByE,EAASkC,MAEVhB,OAAM,SAACC,GAAD,OAASC,QAAQM,IAAR,gBAAqBP,QA8G/B5H,WA3GV,SAAwBb,GAENA,EAAKC,MAAMC,MAAK,SAACC,GAAD,OAAOA,EAAEC,MAAQP,EAAYO,OAa3D0E,EACGyE,OAAO,cAAevJ,EAAKI,KAC3BkF,MAAK,SAACqE,GAEL,IAAMH,EAAWjI,EAAMC,KAAI,SAACkI,GAAD,OAAQA,EAAEtJ,MAAQJ,EAAKI,IAAMuJ,EAAUD,KAElEpC,EAASkC,MAEVhB,OAAM,SAACC,GAAD,OAASC,QAAQM,IAAR,gBAAqBP,OAlBvC3D,EACG8E,IAAI,cAAe5J,EAAKI,KACxBkF,MAAK,SAACqE,GAEL,IAAMH,EAAWjI,EAAMC,KAAI,SAACkI,GAAD,OAAQA,EAAEtJ,MAAQJ,EAAKI,IAAMuJ,EAAUD,KAElEpC,EAASkC,MAEVhB,OAAM,SAACC,GAAD,OAASC,QAAQM,IAAR,gBAAqBP,QA+FjC/G,UAAWuF,EACXpC,UAAW9D,IAEb,cAAC,IAAD,CAAOoI,OAAK,EAAC/D,KAAK,IAAlB,SACGpG,EAAa,cAAC,IAAD,CAAUM,GAAG,MAAS,cAAC,IAAD,CAAUA,GAAG,kBAGrD,cAAC,EAAD,IACA,cAAC,EAAD,CACE0C,OAAQ6E,EACR/E,QAAS+G,GACTpG,QAASoE,EACTjE,aA7FR,YAA4C,IAAhBlC,EAAe,EAAfA,KAAMW,EAAS,EAATA,MAChCyD,EACG+E,WAAW,WAAY,CACtBnJ,OACAW,UAEDiE,MAAK,SAACgD,GACLjB,EAAeiB,GACfO,QAEDL,OAAM,SAACC,GAAD,OAASC,QAAQM,IAAR,gBAAqBP,UAqFnC,cAAC,EAAD,CACEzG,OAAQ+E,EACRjF,QAAS+G,GACTpG,QAASsE,EACTzF,WA1ER,YAAyC,IAAfZ,EAAc,EAAdA,KAAMxB,EAAQ,EAARA,KAC9B4F,EACGgF,QAAQ,QAAS,CAChBpJ,OACAxB,SAEDoG,MAAK,SAACqE,GACLrC,EAAS,CAACqC,GAAF,mBAAcpI,KACtBsH,QAEDL,OAAM,SAACC,GAAD,OAASC,QAAQM,IAAR,gBAAqBP,UAkEnC,cAAC,EAAD,CAAe/H,KAAM,mBAAoBzB,MAAO,6DAChD,cAAC,EAAD,CACE+C,OAAQ2E,EACR7E,QAAS+G,GACTpG,QAASkE,EACThG,YAAaiI,GACbpF,eA9FR,YAAyC,IAAXrC,EAAU,EAAVA,OAC5B2D,EACGiF,aAAa,kBAAmB,CAC/B5I,WAEDmE,MAAK,SAACgD,GACLjB,EAAeiB,GACfO,QAEDL,OAAM,SAACC,GAAD,OAASC,QAAQM,IAAR,gBAAqBP,UAuFnC,cAAC,EAAD,CAAYzI,KAAMmH,EAAcrF,QAAS+G,KACzC,cAAC,EAAD,CACE7G,OAAQwF,GACR1F,QAAS+G,GACTtE,WAAYA,GACZC,QAASA,WClTnBwF,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJC,SAASC,eAAe,W","file":"static/js/main.25381fec.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Header({isLoggedIn, title, link, userData, onLogOut}) { \n    return (\n    <>\n        <div className=\"logo\"></div>\n        <div className=\"header__auth-title-wrapper\">\n            {isLoggedIn && <h2 className=\"header__auth-title\">{userData}</h2>}\n            <Link to={link} className={isLoggedIn ? `header__auth-title header__auth-title_type_exit` : `header__auth-title`} onClick={onLogOut}>{title}</Link>\n        </div>\n    </>\n    )\n}\n\nexport default Header;\n\n\n\n\n\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport basketImage from '../images/element-trash.png';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n    function handleClick() {\n        props.onCardClick(props.card);\n    } \n\n    function handleDeleteClick() {\n        props.onCardDelete(props.card._id);\n    }\n\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n    const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n    // Создаём переменную, которую после зададим в `className` для кнопки лайка\n    const cardLikeButtonClassName = (`elements__like ${isLiked && 'elements__like_active'}`);  \n\n    function handleLikeClick() {\n        props.onCardLike(props.card);\n    }\n\n    return (\n        <>\n            {props.card.owner._id === currentUser._id && <img src={basketImage} alt=\"иконка мусорной корзины\" className=\"elements__basket\" onClick={handleDeleteClick} />}\n            <img src={props.card.link} alt={props.card.name} className=\"elements__image\" onClick={handleClick} />\n            <div className=\"elements__footer\">\n                <h2 className=\"elements__text\">{props.card.name}</h2>\n                <div className=\"elements__like-container\">\n                    <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick}></button>\n                    <div className=\"elements__likes-number\">{props.card.likes.length}</div>\n                </div>   \n            </div>\n        </>\n    )       \n}\n\nexport default Card;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC6SURBVHgBrZQBEYMwDEV/dhMwCUiYgyFhEuZgliYBB2MOkBAHMAVduqNH6AXumvLu2gtteIRCC2wQQrhLG8Oadiv/PN/UGHM3aZds7Cm5nCcSEZNMvCVuUUcfRaPx5FL+FTUSPFBHR7EX2RX+qiZZowGz6BX8dNFxSlb4YS1i+Jm06LCKDhMN8LN6tRo4dpSu4neEA/mHKK+IUQ6nQIs8C86WiFGBFn1RDluiHuV8UkB6dO8oNVh2vfADmHGLn/t8X7gAAAAASUVORK5CYII=\"","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    return (\n        <main className=\"content\">\n        <section className=\"profile\">\n            <div className=\"profile__info\">\n                <button className=\"profile__avatar\" onClick={props.onEditAvatar} type=\"button\" style={{ backgroundImage: `url(${currentUser.avatar})` }}></button>\n                <div className=\"profile__data\" >\n                    <div className=\"profile__wrap\">\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\n                        <button className=\"profile__edit-button hover\" type=\"button\" onClick={props.onEditProfile}></button>\n                    </div>\n                    <p className=\"profile__occupation\">{currentUser.about}</p>\n                </div>\n            </div>\n            <button className=\"profile__add-button hover\" onClick={props.onAddPlace}>+</button>\n        </section>\n        <section className=\"elements\">\n            <ul className=\"elements__list\">\n                {props.cards.map((card) => (\n                    <li className=\"elements__item\" key={card._id}>\n                        <Card card={card} onCardClick={props.onCardClick} userId={currentUser._id} onCardDelete={props.onCardDelete} onCardLike={props.onCardLike} />\n                    </li> \n                ))}\n            </ul>\n        </section>\n        {props.isLoading && <div className=\"spinner\"><i></i></div>}\n        </main>\n    )\n}\n\nexport default Main;","import React from 'react';\n\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">© 2020. Елена Стрижакова</p>\n        </footer>\n    )\n}\n\nexport default Footer;\n\n","export default __webpack_public_path__ + \"static/media/close-icon.118074ba.svg\";","import React from 'react'; \nimport closeIcon from '../images/close-icon.svg';\n\nfunction ImagePopup(props) {\n    return (\n        <div className={props.card.link ? `modal modal_type_picture modal_opened` : `modal modal_type_picture`}>\n        <div className=\"modal__overlay modal__overlay_image\"></div>\n        <div className=\"modal__wrapper\">\n            <img src={props.card.link} alt={props.card.name} className=\"modal__picture-image\" />\n            <p className=\"modal__picture-text\">{props.card.name}</p>\n            <img src={closeIcon} alt=\"закрывающая иконка\" className=\"modal__close hover\" onClick={props.onClose} />\n        </div>\n    </div>\n    )\n}\n\nexport default ImagePopup;","import React from 'react';\nimport closeIcon from '../images/close-icon.svg';\n\nfunction PopupWithForm(props) {\n    return (\n        <div className={props.isOpen ? `modal modal_type_${props.name} modal_opened` : `modal modal_type_${props.name}`}> \n            <div className=\"modal__overlay\"></div>\n            <form className={`modal__container modal__container_type_${props.name}`} onSubmit={props.onSubmit}>\n                <img src={closeIcon} alt=\"закрывающая иконка\" className=\"modal__close hover\" onClick={props.onClose} />\n                <h2 className=\"modal__title\">{props.title}</h2>\n                {props.children}\n                <button type=\"submit\" className=\"modal__btn\">\n                    Сохранить\n                </button>\n            </form>\n        </div>\n    )\n}\n\nexport default PopupWithForm;","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from '../components/PopupWithForm';\n\nfunction EditProfilePopup(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n    const [name, setName] = React.useState('');\n    const [description, setDescription] = React.useState('');\n\n    React.useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n      }, [currentUser]); \n\n\n    function handleNameChange(e) {\n        setName(e.target.value);\n    }\n\n    function handleDescriptionChange(e) {\n        setDescription(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        // Запрещаем браузеру переходить по адресу формы\n        e.preventDefault();\n    \n        // Передаём значения управляемых компонентов во внешний обработчик\n        props.onUpdateUser({\n          name,\n          about: description,\n        }); \n      }\n\n    return (\n        <PopupWithForm name={'profile'} title={'Редактировать профиль'} isOpen={props.isOpen} onClose={props.onClose} isClose={props.isOpen} onSubmit={handleSubmit}>\n            <input id=\"profile-name-input\" type=\"text\" className=\"modal__input modal__input_type_name\" name=\"name\" \n            placeholder=\"Елена Стрижакова\" minLength=\"2\" maxLength=\"40\" required onChange={handleNameChange} value={name || ''} />\n            <span id=\"profile-name-input-error\"></span>\n            <input id=\"profile-occupation-input\" type=\"text\" className=\"modal__input modal__input_type_occupation\" name=\"link\" \n            placeholder=\"Начинающий веб-разработчик и опытный моряк-путешественник\" minLength=\"2\" maxLength=\"200\" required value={description || ''} \n            onChange={handleDescriptionChange} />\n            <span id=\"profile-occupation-input-error\"></span>\n        </PopupWithForm>\n    )\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from '../components/PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n    const avatarRef = React.useRef();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n      \n        props.onUpdateAvatar({\n          avatar: avatarRef.current.value /* Значение инпута, полученное с помощью рефа */\n        });\n    }\n    \n    return (\n        <PopupWithForm name={'avatar'} title={'Обновить аватар'} isOpen={props.isOpen} onClose={props.onClose} isClose={props.isOpen} onSubmit={handleSubmit}>\n            <input id=\"card-avatar-input\" type=\"url\" className=\"modal__input modal__input_type_occupation\" name=\"link\" \n            placeholder=\"Ссылка на картинку\" required ref={avatarRef} />\n            <span id=\"card-avatar-input-error\"></span>\n        </PopupWithForm>\n    )\n}\n\nexport default EditAvatarPopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n    const placeLinkRef = React.useRef();\n    const placeNameRef = React.useRef();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        props.onAddPlace({\n            name: placeNameRef.current.value,\n            link: placeLinkRef.current.value\n        });\n    }\n\n    return (\n        <PopupWithForm name={'new-card'} title={'Новое место'} isOpen={props.isOpen} onClose={props.onClose} isClose={props.isClose} onSubmit={handleSubmit}>\n            <input id=\"card-name-input\" type=\"text\" className=\"modal__input modal__input_type_name\" name=\"name\" placeholder=\"Название\" minLength=\"1\" maxLength=\"30\" required ref={placeNameRef} />\n            <span id=\"card-name-input-error\"></span>\n            <input id=\"card-occupation-input\" type=\"url\" className=\"modal__input modal__input_type_occupation\" name=\"link\" placeholder=\"Ссылка на картинку\" required ref={placeLinkRef} />\n            <span id=\"card-occupation-input-error\"></span>\n        </PopupWithForm>\n\n    )\n}\n\nexport default AddPlacePopup;","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) { \n  const [formValues, setFormValues] = React.useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleInputChange = (e) => {\n      const { name, value } = e.target;\n      setFormValues({ \n        ...formValues, \n        [name]: value // объект меняется при каждом изменении, в setFormValues возвращаем этот новый объект, кот состоит из старых и нового перезаписанного поля\n      });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    const { email, password } = formValues;\n\n    // Передаю значения управляемых компонентов во внешний обработчик\n    props.onFormSubmit({\n      email,\n      password\n    });\n  }\n\n  return (\n    <div className=\"modal modal_opened modal_type_auth\">\n      <form onSubmit={handleSubmit}>\n        <h2 className=\"modal__title modal__title_type_auth\">Регистрация</h2>\n        <input\n          type=\"email\"\n          className=\"modal__input modal__input_type_auth\"\n          name=\"email\"\n          placeholder=\"Email\"\n          minLength=\"1\"\n          maxLength=\"30\"\n          required\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"password\"\n          className=\"modal__input modal__input_type_auth\"\n          name=\"password\"\n          placeholder=\"Пароль\"\n          required\n          onChange={handleInputChange}\n        />\n        <button type=\"submit\" className=\"modal__btn modal__btn_type_auth\">\n          Зарегистрироваться\n        </button>\n        <div className=\"modal__auth-signin\">\n          <Link to=\"sign-in\" className=\"modal__auth-paragraph hover\">Уже зарегистрированы? Войти</Link>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default Register;\n","import React from \"react\";\n\nfunction Login(props) {\n  const [formValues, setFormValues] = React.useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleInputChange = (e) => {\n      const { name, value } = e.target;\n      setFormValues({ \n        ...formValues, \n        [name]: value // объект меняется при каждом изменении, в setFormValues возвращаем этот новый объект, кот состоит из старых и нового перезаписанного поля\n      });\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    const { email, password } = formValues;\n\n    // Передаю значения управляемых компонентов во внешний обработчик\n    props.onFormSubmit({\n      email,\n      password\n    });\n  }\n\n  return (\n    <div className=\"modal modal_opened modal_type_auth\">\n      <form className=\"form__container\" onSubmit={handleSubmit}>\n        <h2 className=\"modal__title modal__title_type_auth\">Вход</h2>\n        <input\n          type=\"email\"\n          className=\"modal__input modal__input_type_auth\"\n          name=\"email\"\n          placeholder=\"Email\"\n          minLength=\"1\"\n          maxLength=\"30\"\n          required\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"password\"\n          className=\"modal__input modal__input_type_auth\"\n          name=\"password\"\n          placeholder=\"Пароль\"\n          required\n          onChange={handleInputChange}\n        />\n        <button type=\"submit\" className=\"modal__btn modal__btn_type_auth\">\n          Войти\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n","export default __webpack_public_path__ + \"static/media/tick-icon.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/cross-icon.df8eddf6.svg\";","import React from 'react';\nimport tickIcon from '../images/tick-icon.svg';\nimport crossIcon from '../images/cross-icon.svg';\nimport closeIcon from '../images/close-icon.svg';\n\nfunction InfoToolTip({isOpen, onClose, isSignedUp, message}) {\n\n  return (\n    <div className={isOpen ? `modal modal_opened` : `modal`}>\n    <div className=\"modal__overlay\"></div>\n    <div className='modal__container modal_type_auth'> \n    <img src={closeIcon} alt=\"закрывающая иконка\" className=\"modal__close hover\" onClick={onClose} />\n      <img src={isSignedUp ? tickIcon : crossIcon} alt=\"закрывающая иконка\" className=\"modal__auth-tick\" />\n      <h2 className=\"modal__title modal__title_type_auth-tooltip\">{isSignedUp ? `Вы успешно зарегистрировались!` : `${message}!\nПопробуйте ещё раз. `}</h2>\n    </div>\n    </div>\n  )\n}\n\nexport default InfoToolTip;\n\n\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\n// этот компонент принимает другой компонент в качестве пропса\n// он также может взять неограниченное число пропсов и передать их новому компоненту\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute;\n","class Api {\n  constructor(options) {\n    this._url = options.baseUrl;\n    this.headers = options.headers;\n  }\n\n  _getInitialCards(path) {\n    return fetch(`${this._url}${path}`, {\n        headers: this.headers\n      })\n      .then(this.checkStatus);\n  }\n\n  getUserInfo(path) {\n    return fetch(`${this._url}${path}`, {\n        headers: this.headers\n      })\n      .then(this.checkStatus);\n  }\n\n  getAppInfo(userDataPath, cardsDataPath) {\n    return Promise.all([this.getUserInfo(userDataPath), this._getInitialCards(cardsDataPath)]);\n  }\n\n  updateInfo(path, {name, about}) {\n    return fetch(`${this._url}${path}`, {\n        method: \"PATCH\",\n        headers: this.headers,\n        body: JSON.stringify({\n          name: name,\n          about: about\n        })\n      })\n      .then(this.checkStatus);\n  }\n\n  put(path, id) {\n    return fetch(`${this._url}${path}/${id}`, {\n        method: \"PUT\",\n        headers: this.headers\n      })\n      .then(this.checkStatus);\n  }\n\n  delete(path, id) {\n    return fetch(`${this._url}${path}/${id}`, {\n      method: \"DELETE\",\n      headers: this.headers\n    })\n      .then(this.checkStatus)\n      .then(res => res);\n  }\n\n    updateAvatar(path, { avatar }) {\n      return fetch(`${this._url}${path}`, {\n        method: \"PATCH\",\n        headers: this.headers,\n        body: JSON.stringify({\n          avatar: avatar\n        })\n      })\n        .then(this.checkStatus);\n    }\n\n  addCard(path, { name, link }) {\n    return fetch(`${this._url}${path}`, {\n        method: \"POST\",\n        headers: this.headers,\n        body: JSON.stringify({\n          name: name,\n          link: link\n        })\n      })\n      .then(this.checkStatus);\n  }\n\n  checkStatus(res) {\n    return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n  }\n}\n\nexport const api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-15/',\n  headers: {\n    authorization: '4b693f44-f60e-4f4e-bfd2-2bb476e7515d',\n    'Content-Type': 'application/json'\n  }\n});","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nconst checkResponse = (res) => { return res.ok ? res.json() : Promise.reject(res.status); }\n\nexport const register = (password, email) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({password, email})\n  })\n  .then(checkResponse)\n}; \n\nexport const authorize = (password, email) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({password, email})\n  })\n  .then(checkResponse)\n}; \n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    },\n  })\n  .then(checkResponse)\n}; ","import React from \"react\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport EditProfilePopup from \"./EditPropfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Register from \"./Register.jsx\";\nimport Login from \"./Login.jsx\";\nimport InfoToolTip from \"./InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { api } from \"../utils/Api\";\nimport * as auth from \"../utils/Auth\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(\n    false\n  );\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(\n    false\n  );\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isSpinnerLoading, setIsSpinnerLoading] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n  const [isAuthPopupOpen, setIsAuthPopupOpen] = React.useState(false);\n  const [userInfo, setUserInfo] = React.useState({\n    email: \"\",\n  });\n  const [isSignedUp, setIsSignedUp] = React.useState(false);\n  const [message, setMessage] = React.useState('');\n\n  const userEmail = userInfo.email;\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  function handleRegister({ password, email }) {\n    auth\n      .register(password, email)\n      .then((data) => {\n        setUserInfo({\n          email: data.data.email,\n        });\n        setIsSignedUp(true);\n        setIsAuthPopupOpen(!isAuthPopupOpen);\n        history.push(\"/sign-in\");\n      })\n      .catch((err) => {\n        console.log(err)\n        if (err === 400) {\n          setMessage('Некорректно заполнено одно из полей');\n        }\n          setIsSignedUp(false);\n          setIsAuthPopupOpen(!isAuthPopupOpen);\n      });\n  }\n\n  function handleLogin({ password, email }) {\n    auth\n      .authorize(password, email)\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem(\"jwt\", data.token);\n        }\n        setIsLoggedIn(true);\n        setUserInfo({\n          email: email,\n        });\n        history.push(\"/\");\n      })\n      .catch((err) => {\n        if (err === 400) {\n          setMessage('Не передано одно из полей');\n        } else if (err === 401) {\n          setMessage('Пользователь с email не найден');\n        }\n        setIsSignedUp(false);\n        setIsAuthPopupOpen(true);\n      });\n  }\n\n  function tokenCheck() {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .getContent(jwt)\n        .then((res) => {\n          if (res.data.email) {\n            setUserInfo({\n              email: res.data.email,\n            })\n            setIsLoggedIn(true);\n            history.push(\"/\");\n          };\n        })\n        .catch((err) => console.error(err));\n    }\n  }\n\n  function handleLogOut() {\n    localStorage.removeItem(\"jwt\");\n    setUserInfo({\n      email: '',\n    });\n    setIsLoggedIn(false);\n  }\n\n  React.useEffect(() => {\n    setIsSpinnerLoading(true);\n    api\n      .getAppInfo(\"users/me\", \"cards\")\n      .then((data) => {\n        const [userData, cardsArray] = data;\n        setCards(cardsArray);\n        setCurrentUser(userData);\n      })\n      .catch((err) => console.log(`Error ${err}`))\n      .finally(() => {\n        setIsSpinnerLoading(false);\n      });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsAuthPopupOpen(false);\n\n    if (selectedCard.link) {\n      setSelectedCard(!selectedCard.link);\n    }\n  }\n\n  function handleCardDelete(id) {\n    api\n      .delete(\"cards\", id)\n      .then(() => {\n        const newCards = cards.filter((c) => {\n          return c._id !== id;\n        });\n        setCards(newCards);\n      })\n      .catch((err) => console.log(`Error ${err}`));\n  }\n\n  function handleCardLike(card) {\n    // Проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    if (!isLiked) {\n      // Отправляем запрос в API и получаем обновлённые данные карточки\n      api\n        .put(\"cards/likes\", card._id)\n        .then((newCard) => {\n          // Формируем новый массив на основе имеющегося\n          const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n          // Обновляем стейт\n          setCards(newCards);\n        })\n        .catch((err) => console.log(`Error ${err}`));\n    } else {\n      api\n        .delete(\"cards/likes\", card._id)\n        .then((newCard) => {\n          // Формируем новый массив на основе имеющегося\n          const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n          // Обновляем стейт\n          setCards(newCards);\n        })\n        .catch((err) => console.log(`Error ${err}`));\n    }\n  }\n\n  function handleUpdateUser({ name, about }) {\n    api\n      .updateInfo(\"users/me\", {\n        name,\n        about,\n      })\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`Error ${err}`));\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    api\n      .updateAvatar(\"users/me/avatar\", {\n        avatar,\n      })\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`Error ${err}`));\n  }\n\n  function handleAddPlace({ name, link }) {\n    api\n      .addCard(\"cards\", {\n        name,\n        link,\n      })\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`Error ${err}`));\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <header className=\"header\">\n          <Route exact path=\"/\">\n            <Header\n              isLoggedIn={isLoggedIn}\n              title={\"Выйти\"}\n              link={\"sign-in\"}\n              userData={userEmail}\n              onLogOut={handleLogOut}\n            />\n          </Route>\n          <Route path=\"/sign-up\">\n            <Header isLoggedIn={isLoggedIn} title={\"Войти\"} link={\"sign-in\"} />\n          </Route>\n          <Route path=\"/sign-in\">\n            <Header\n              isLoggedIn={isLoggedIn}\n              title={\"Регистрация\"}\n              link={\"sign-up\"}\n            />\n          </Route>\n        </header>\n        <Switch>\n          <Route path=\"/sign-up\">\n            <Register onFormSubmit={handleRegister} />\n          </Route>\n          <Route path=\"/sign-in\">\n            <Login onFormSubmit={handleLogin} tokenCheck={tokenCheck} />\n          </Route>\n          <ProtectedRoute\n            exact\n            path=\"/\"\n            isLoggedIn={isLoggedIn}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onClose={closeAllPopups}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardDelete={handleCardDelete}\n            onCardLike={handleCardLike}\n            isLoading={isSpinnerLoading}\n            component={Main}\n          />\n          <Route exact path=\"/\">\n            {isLoggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          isClose={isEditProfilePopupOpen}\n          onUpdateUser={handleUpdateUser}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          isClose={isAddPlacePopupOpen}\n          onAddPlace={handleAddPlace}\n        />\n        <PopupWithForm name={\"confirm-card-del\"} title={\"Вы уверены?\"} />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          isClose={isEditAvatarPopupOpen}\n          onCardClick={handleCardClick}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n        <InfoToolTip\n          isOpen={isAuthPopupOpen}\n          onClose={closeAllPopups}\n          isSignedUp={isSignedUp}\n          message={message}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}